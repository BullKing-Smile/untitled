# Interview Problems

## TXAI

- 所在公司：Space42 LLC. UAE
- 项目描述：
> 本项目是一款基于人工智能（AI）和自动驾驶技术的智能网约车平台，旨在为阿联酋（UAE）用户提供高效、安全、便捷的无人驾驶打车服务。系统整合了自动驾驶汽车、智能调度算法、实时导航、乘客/司机（远程监控）交互系统，打造无缝的城市出行体验。

- 地图引擎模块
  - 自研地图渲染引擎和路线规划/导航服务，特定区域提供高精度导航功能
- AI 自动驾驶系统
  - 采用L4级 自动驾驶技术，支持城市道路、高速公路等多种场景。
  - 基于深度学习的环境感知（激光雷达、摄像头、毫米波雷达融合）。
  - 实时交通预测与动态路径优化，减少拥堵和等待时间。
- 智能叫车 & 调度
  - 一键叫车：用户可通过APP预约自动驾驶车辆，支持即时用车/预约用车。
  - AI 动态调度：优化车辆分配，减少空驶率，提升接单效率。
  - 多车型选择：经济型、豪华型、多人拼车等不同车型适配不同需求。
- 消息模块
  - 轮询消息，推送消息，短信服务和邮件服务等
- 乘客端APP功能
  - 实时车辆追踪：查看自动驾驶车辆的实时位置和预计到达时间（ETA）。
  - 智能安全监控：车内AI摄像头（可选）监测乘客安全，紧急情况自动报警。
  - 无接触支付：支持信用卡、Apple Pay、Google Pay、本地移动支付（如Careem Pay）。
  - 多语言支持：英语、阿拉伯语等，适配阿联酋国际化用户群体。
- 远程监控 & 应急管理
  - 5G远程控制中心：必要时可由人类操作员接管车辆（如极端天气或复杂路况）。
  - 紧急求助按钮：乘客可一键联系客服或紧急救援。

- 智慧城市交通整合
  - 与迪拜、阿布扎比等城市的智能交通系统（ITS）对接，优化红绿灯和车流调度。
  - 支持政府监管数据接口，确保合规运营。
- 用户管理系统
  - 车辆录入，审核与上报，司机录入与审核，乘客注册/登录/注销等。


项目职责：
- 需求评审，团队管理，结构设计
- 负责乘客和司机登录模块：生成验证码，发送验证码，校验验证码，结合网关实现鉴权。
- 预估价格，收藏路线，创建订单，获取计价规则，获取地图引擎规划数据
- 下实时单， 获取预设上下车地点列表，校验下单信息
- 负责灰度发布方案的架构设计和落地，并且负责核心代码的编写，实现了网关和服务服务与服务间的灰度发布

解决的重难点问题
- 计价规则的修改后刷新列表 依旧是老数据的问题， 经过调试，先查询后修改，最后返回查询列表，mybatis层级的缓存导致返回数据没有更新， 手动关闭statement层级的缓存
- 下单成功后 司机抢单是 压测过程中没有问题，上线后出现 重复抢单的问题， 原因是 锁的是常量订单ID, Long的封装类型，在获取longValue()的时候会从他的缓存池里找，因此 [-128-127] 找到的是同一个对象，id是自增的，因此测试的时候数据量比较小没有问题， 上线后就暴露出来了，解决方案：1.使用String;2.ID使用雪花算法；3.使用分布式锁解决方案
- 服务部署 启动问题，服务



















### Sentinel 
#### Sentinel 的 Warm Up的时间设置 依据什么来定？
预热时间 = 系统达到稳定状态所需的最长时间 + 安全缓冲
系统达到稳定状态所需的最长时间 ，这个要算**JVM 预热耗时、缓存加载时间、线程池就绪时间、依赖服务就绪**。
**<font color=orange>简单的说，至少30秒，推荐45秒</font>**。

#### 流量突增的情况，低负载到QPS阈值 sentinel是如何判断的低负载的？
通过 **滑动窗口** （比如默认1秒拆分为20个格子）实时计算 QPS
当检测到 当前QPS < 冷启动阈值 时，自动启用预热模式
冷启动阈值 = 稳定阈值 / coldFactor
coldFactor ：默认 3（即初始阈值仅为稳定 QPS 的 1/3）